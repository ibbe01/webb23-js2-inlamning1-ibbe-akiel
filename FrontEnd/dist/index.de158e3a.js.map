{"mappings":"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","sources":["src/main.js"],"sourcesContent":["const inputElement = document.querySelector('input');\r\nconst buttonElement = document.querySelector('button');\r\nconst computerResult = document.getElementById('computerResult');\r\nconst divWinner = document.getElementById('winner');\r\n\r\n\r\nasync function getPlayer() {\r\n    const url = \"http://localhost:3000/player\";\r\n\r\n    const response = await fetch(url);\r\n\r\n    const player = response.json();\r\n\r\n    console.log(player)\r\n    return player;\r\n}\r\n\r\nconst form = document.querySelector('form');\r\n\r\nform.addEventListener('submit', async (event) => {\r\n    event.preventDefault();\r\n\r\n   \r\n\r\n    const playerName = document.querySelector('input').value\r\n    let playerScore = 0;\r\n\r\n\r\n    const url = \"http://localhost:3000/player\";\r\n\r\n    if (!playerName.trim()) {\r\n        alert(\"Give us name pls xD\")\r\n        return;\r\n    }\r\n\r\n\r\n\r\n    const response = await fetch(url, {\r\n        method: 'POST',\r\n        headers: {\r\n            'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify({ name: playerName, score: playerScore })\r\n\r\n    })\r\n        .then(response => response.json())\r\n        .then(data => {\r\n            gameDisplay(data.name, playerScore);\r\n            console.log(data);\r\n        })\r\n\r\n\r\n\r\n    const res = await fetch(\"http://localhost:3000/highscores\", {\r\n        method: \"GET\",\r\n        headers: {\r\n            'Content-Type': 'application/json'\r\n        }\r\n    });\r\n    const output = await res.json();\r\n    console.log(output)\r\n\r\n\r\n    let computerChoice = [\"sten\", \"sax\", \"påse\"];\r\n    let randomIndex;\r\n    let pick;\r\n\r\n    const buttons = document.querySelectorAll('button[id]');\r\n    buttons.forEach(button => button.style.display = 'inline-block');\r\n\r\n    buttons.forEach(button => {\r\n        button.addEventListener('click', async (e) => {\r\n            e.preventDefault();\r\n            // console.log(\"clicked a button\")\r\n            randomIndex = Math.floor(Math.random() * computerChoice.length);\r\n            pick = computerChoice[randomIndex];\r\n            computerResult.textContent = \"Computer Result: \" + pick;\r\n            let result = calcResult(pick, button.id);\r\n\r\n            playerScore = await updateScore(result, playerName, playerScore);\r\n            gameDisplay(playerName, playerScore);\r\n        })\r\n    })\r\n\r\n\r\n\r\n    const highscoreList = document.getElementById('highscoreList');\r\n\r\n    highscoreList.style = \"border: 2px solid black\";\r\n    highscoreList.style.height = \"350px\";\r\n    highscoreList.style.width = \"150px\";\r\n\r\n    highscoreList.innerHTML = \"Highscore: \\n\" + output.map(player => player.name + \" \" + player.score + \"\\n\");\r\n    computerResult.style.display = \"inline-block\";\r\n\r\n    divWinner.style.display = \"block\";\r\n    inputElement.style.display = 'none';\r\n    buttonElement.style.display = 'none';\r\n\r\n\r\n})\r\n\r\nfunction gameDisplay(playerName, playerScore) {\r\n    const playerInfoElement = document.getElementById('playerInfo');\r\n    playerInfoElement.innerHTML = `Name: ${playerName}, Score: ${playerScore}`;\r\n}\r\n\r\n\r\nasync function updateScore(result, playerName, playerScore) {\r\n\r\n    console.log(playerScore)\r\n\r\n    if (result === 0) {\r\n        divWinner.innerHTML = \"ITS A DRAW\";\r\n        console.log('draw result:' ,playerScore)\r\n\r\n        return playerScore;\r\n\r\n    }\r\n\r\n    if (result === 1) {\r\n        // Uppdatera databasen\r\n        divWinner.innerHTML = `WINNER ${playerName}`;\r\n        return playerScore + 1;\r\n    }\r\n    if (result === -1) {\r\n        // Börja om / visa highscore\r\n        divWinner.innerHTML = \"Computer WON\";\r\n       \r\n        console.log('final result:' ,playerScore)\r\n\r\n        const response = await fetch(\"http://localhost:3000/update/highscore\", {\r\n            method: 'POST',\r\n            headers: {\r\n                'Content-Type': 'application/json'\r\n            },\r\n            body: JSON.stringify({\r\n                name: playerName,\r\n                score: playerScore\r\n            })\r\n        });\r\n\r\n        const res = await fetch(\"http://localhost:3000/highscores\", {\r\n            method: \"GET\",\r\n            headers: {\r\n                'Content-Type': 'application/json'\r\n            }\r\n        });\r\n        const output = await res.json();\r\n\r\n        highscoreList.innerHTML = \"Highscore: \\n\" + output.map(player => player.name + \" \" + player.score + \"\\n\");\r\n\r\n        // }\r\n        return 0;\r\n    }\r\n}\r\n\r\nfunction calcResult(pick, choice) {\r\n    if (pick === choice) {\r\n        return 0;\r\n    }\r\n    else if (pick === \"sten\" && choice === \"sax\") {\r\n        return -1;\r\n    }\r\n    else if (pick === \"sax\" && choice === \"sten\") {\r\n        return 1;\r\n    }\r\n    else if (pick === \"påse\" && choice === \"sax\") {\r\n        return 1;\r\n    }\r\n    else if (pick === \"sax\" && choice === \"påse\") {\r\n        return -1;\r\n    }\r\n    else if (pick === \"sten\" && choice === \"påse\") {\r\n        return 1;\r\n    }\r\n    else if (pick === \"påse\" && choice === \"sten\") {\r\n        return -1;\r\n    }\r\n}\r\n"],"names":[],"version":3,"file":"index.de158e3a.js.map","sourceRoot":"/__parcel_source_root/"}